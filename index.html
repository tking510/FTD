<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ãƒã‚¤ãƒ³ãƒˆäº¤æ›ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ </title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/qrcode@1.5.3/build/qrcode.min.js"></script>
    <style>
        :root {
            --primary-gold: #FFD700;
            --secondary-gold: #FFA500;
            --accent-gold: #DAA520;
            --light-gold: #FFFACD;
        }
        
        .gradient-bg {
            background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 50%, var(--light-gold) 100%);
        }
        
        .gold-gradient {
            background: linear-gradient(135deg, var(--primary-gold) 0%, var(--secondary-gold) 100%);
        }
        
        .gold-border {
            border: 2px solid var(--accent-gold);
        }
        
        .gold-text {
            color: var(--accent-gold);
        }
        
        .card-shadow {
            box-shadow: 0 8px 25px rgba(218, 165, 32, 0.15);
        }
        
        .btn-gold {
            background: linear-gradient(135deg, var(--primary-gold) 0%, var(--secondary-gold) 100%);
            border: none;
            color: white;
            font-weight: 600;
            transition: all 0.3s ease;
        }
        
        .btn-gold:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(255, 215, 0, 0.4);
        }
        
        .admin-nav {
            background: linear-gradient(135deg, #ffffff 0%, var(--light-gold) 100%);
            border-bottom: 3px solid var(--accent-gold);
        }
        
        .stats-card {
            background: white;
            border-left: 4px solid var(--primary-gold);
        }
        
        .hidden {
            display: none !important;
        }
        
        .user-screen {
            min-height: 100vh;
            background: linear-gradient(135deg, #f8f9fa 0%, var(--light-gold) 50%, #ffffff 100%);
        }
        
        .qr-container {
            max-width: 200px;
            margin: 0 auto;
        }
    </style>
</head>
<body class="gradient-bg min-h-screen">
    <!-- ãƒ­ã‚°ã‚¤ãƒ³ç”»é¢ -->
    <div id="loginScreen" class="min-h-screen flex items-center justify-center">
        <div class="bg-white p-8 rounded-lg card-shadow max-w-md w-full mx-4">
            <div class="text-center mb-8">
                <i class="fas fa-crown text-6xl gold-text mb-4"></i>
                <h1 class="text-3xl font-bold gold-text">ãƒã‚¤ãƒ³ãƒˆäº¤æ›ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ </h1>
                <p class="text-gray-600 mt-2">ç®¡ç†ç”»é¢</p>
            </div>
            <form id="loginForm">
                <div class="mb-6">
                    <label class="block text-gray-700 text-sm font-bold mb-2">ç®¡ç†è€…ID</label>
                    <input type="text" id="adminId" class="w-full px-3 py-2 border gold-border rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-400" required>
                </div>
                <div class="mb-6">
                    <label class="block text-gray-700 text-sm font-bold mb-2">ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰</label>
                    <input type="password" id="adminPassword" class="w-full px-3 py-2 border gold-border rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-400" required>
                </div>
                <button type="submit" class="w-full btn-gold py-3 px-4 rounded-lg text-white font-bold">
                    <i class="fas fa-sign-in-alt mr-2"></i>ãƒ­ã‚°ã‚¤ãƒ³
                </button>
            </form>
        </div>
    </div>

    <!-- ãƒ¦ãƒ¼ã‚¶ãƒ¼ç”»é¢ -->
    <div id="userScreen" class="user-screen hidden">
        <div class="container mx-auto px-4 py-8">
            <div class="max-w-md mx-auto">
                <!-- ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ­ã‚°ã‚¤ãƒ³ -->
                <div id="userLoginForm" class="bg-white p-8 rounded-lg card-shadow">
                    <div class="text-center mb-8">
                        <i class="fas fa-coins text-6xl gold-text mb-4"></i>
                        <h1 class="text-3xl font-bold gold-text">ãƒã‚¤ãƒ³ãƒˆäº¤æ›</h1>
                        <p class="text-gray-600 mt-2">ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ­ã‚°ã‚¤ãƒ³</p>
                    </div>
                    <div class="mb-6">
                        <label class="block text-gray-700 text-sm font-bold mb-2">é›»è©±ç•ªå·</label>
                        <input type="tel" id="userPhone" class="w-full px-3 py-2 border gold-border rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-400" placeholder="09012345678" required>
                    </div>
                    <div class="mb-6">
                        <label class="block text-gray-700 text-sm font-bold mb-2">ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰</label>
                        <input type="password" id="userPassword" class="w-full px-3 py-2 border gold-border rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-400" required>
                    </div>
                    <button onclick="userLogin()" class="w-full btn-gold py-3 px-4 rounded-lg text-white font-bold">
                        <i class="fas fa-sign-in-alt mr-2"></i>ãƒ­ã‚°ã‚¤ãƒ³
                    </button>
                </div>

                <!-- ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ -->
                <div id="userDashboard" class="hidden">
                    <div class="bg-white p-6 rounded-lg card-shadow mb-6">
                        <div class="flex justify-between items-center mb-4">
                            <h2 class="text-2xl font-bold gold-text">ãƒã‚¤ãƒ³ãƒˆäº¤æ›</h2>
                            <button onclick="userLogout()" class="text-gray-500 hover:text-red-500">
                                <i class="fas fa-sign-out-alt"></i> ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ
                            </button>
                        </div>
                        <div class="text-center mb-6">
                            <p class="text-gray-600">ç¾åœ¨ã®ãƒã‚¤ãƒ³ãƒˆ</p>
                            <p class="text-4xl font-bold gold-text" id="userPoints">0 PT</p>
                        </div>
                        <div class="grid grid-cols-2 gap-4">
                            <button onclick="showPurchaseForm()" class="btn-gold py-3 px-4 rounded-lg text-white font-bold">
                                <i class="fas fa-plus mr-2"></i>è³¼å…¥
                            </button>
                            <button onclick="showWithdrawForm()" class="bg-green-500 hover:bg-green-600 py-3 px-4 rounded-lg text-white font-bold">
                                <i class="fas fa-minus mr-2"></i>æ›é‡‘
                            </button>
                        </div>
                    </div>

                    <!-- è³¼å…¥ãƒ•ã‚©ãƒ¼ãƒ  -->
                    <div id="purchaseForm" class="bg-white p-6 rounded-lg card-shadow mb-6 hidden">
                        <h3 class="text-xl font-bold mb-4 gold-text">ãƒã‚¤ãƒ³ãƒˆè³¼å…¥</h3>
                        <div class="mb-4">
                            <label class="block text-gray-700 text-sm font-bold mb-2">é‡‘é¡ï¼ˆæœ€ä½2,000å††ï¼‰</label>
                            <input type="number" id="purchaseAmount" min="2000" class="w-full px-3 py-2 border gold-border rounded-lg" placeholder="2000">
                        </div>
                        <div class="mb-4">
                            <label class="block text-gray-700 text-sm font-bold mb-2">æ±ºæ¸ˆæ–¹æ³•</label>
                            <select id="purchaseMethod" class="w-full px-3 py-2 border gold-border rounded-lg" onchange="showPaymentInfo()">
                                <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
                                <option value="paypay">PayPay</option>
                                <option value="crypto">ä»®æƒ³é€šè²¨</option>
                                <option value="bank">éŠ€è¡ŒæŒ¯è¾¼</option>
                                <option value="convenience">ã‚³ãƒ³ãƒ“ãƒ‹æ±ºæ¸ˆ</option>
                            </select>
                        </div>
                        <div id="cryptoSelect" class="mb-4 hidden">
                            <label class="block text-gray-700 text-sm font-bold mb-2">é€šè²¨é¸æŠ</label>
                            <select id="cryptoType" class="w-full px-3 py-2 border gold-border rounded-lg">
                                <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
                            </select>
                        </div>
                        <div id="convenienceSelect" class="mb-4 hidden">
                            <label class="block text-gray-700 text-sm font-bold mb-2">ã‚³ãƒ³ãƒ“ãƒ‹é¸æŠ</label>
                            <select id="convenienceType" class="w-full px-3 py-2 border gold-border rounded-lg">
                                <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
                            </select>
                        </div>
                        <button onclick="submitPurchase()" class="w-full btn-gold py-3 px-4 rounded-lg text-white font-bold">
                            ç”³è«‹
                        </button>
                        <button onclick="hidePurchaseForm()" class="w-full mt-2 bg-gray-500 hover:bg-gray-600 py-3 px-4 rounded-lg text-white font-bold">
                            ã‚­ãƒ£ãƒ³ã‚»ãƒ«
                        </button>
                    </div>

                    <!-- æ›é‡‘ãƒ•ã‚©ãƒ¼ãƒ  -->
                    <div id="withdrawForm" class="bg-white p-6 rounded-lg card-shadow mb-6 hidden">
                        <h3 class="text-xl font-bold mb-4 gold-text">ãƒã‚¤ãƒ³ãƒˆæ›é‡‘</h3>
                        <div class="mb-4">
                            <label class="block text-gray-700 text-sm font-bold mb-2">é‡‘é¡ï¼ˆæœ€ä½4,000å††ï¼‰</label>
                            <input type="number" id="withdrawAmount" min="4000" class="w-full px-3 py-2 border gold-border rounded-lg" placeholder="4000">
                        </div>
                        <div class="mb-4">
                            <label class="block text-gray-700 text-sm font-bold mb-2">å‡ºé‡‘æ–¹æ³•</label>
                            <select id="withdrawMethod" class="w-full px-3 py-2 border gold-border rounded-lg">
                                <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
                                <option value="paypay">PayPay</option>
                                <option value="crypto">ä»®æƒ³é€šè²¨</option>
                                <option value="bank">éŠ€è¡ŒæŒ¯è¾¼</option>
                            </select>
                        </div>
                        <button onclick="submitWithdraw()" class="w-full bg-green-500 hover:bg-green-600 py-3 px-4 rounded-lg text-white font-bold">
                            ç”³è«‹
                        </button>
                        <button onclick="hideWithdrawForm()" class="w-full mt-2 bg-gray-500 hover:bg-gray-600 py-3 px-4 rounded-lg text-white font-bold">
                            ã‚­ãƒ£ãƒ³ã‚»ãƒ«
                        </button>
                    </div>

                    <!-- æ±ºæ¸ˆæƒ…å ±è¡¨ç¤º -->
                    <div id="paymentInfo" class="bg-white p-6 rounded-lg card-shadow hidden">
                        <h3 class="text-xl font-bold mb-4 gold-text">æ±ºæ¸ˆæƒ…å ±</h3>
                        <div id="paymentDetails"></div>
                        <div id="qrCodeContainer" class="qr-container mt-4 hidden"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ç®¡ç†ç”»é¢ -->
    <div id="adminScreen" class="min-h-screen hidden">
        <!-- ãƒ˜ãƒƒãƒ€ãƒ¼ -->
        <header class="admin-nav p-4">
            <div class="container mx-auto flex justify-between items-center">
                <div class="flex items-center">
                    <i class="fas fa-crown text-2xl gold-text mr-3"></i>
                    <h1 class="text-2xl font-bold gold-text">ãƒã‚¤ãƒ³ãƒˆäº¤æ›ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ  ç®¡ç†ç”»é¢</h1>
                </div>
                <div class="flex items-center space-x-4">
                    <span class="text-sm">ç®¡ç†è€…: admin</span>
                    <button onclick="logout()" class="btn-gold px-4 py-2 rounded-lg">
                        <i class="fas fa-sign-out-alt mr-2"></i>ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ
                    </button>
                </div>
            </div>
        </header>

        <!-- ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ -->
        <nav class="bg-white border-b-2 border-yellow-400">
            <div class="container mx-auto">
                <div class="flex space-x-0">
                    <button onclick="showTab('dashboard')" class="tab-btn px-6 py-3 font-semibold border-b-3 border-transparent hover:border-yellow-400 active">
                        <i class="fas fa-tachometer-alt mr-2"></i>ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰
                    </button>
                    <button onclick="showTab('applications')" class="tab-btn px-6 py-3 font-semibold border-b-3 border-transparent hover:border-yellow-400">
                        <i class="fas fa-clipboard-list mr-2"></i>ç”³è«‹ç®¡ç†
                    </button>
                    <button onclick="showTab('users')" class="tab-btn px-6 py-3 font-semibold border-b-3 border-transparent hover:border-yellow-400">
                        <i class="fas fa-users mr-2"></i>ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†
                    </button>
                    <button onclick="showTab('payments')" class="tab-btn px-6 py-3 font-semibold border-b-3 border-transparent hover:border-yellow-400">
                        <i class="fas fa-credit-card mr-2"></i>æ±ºæ¸ˆè¨­å®š
                    </button>
                    <button onclick="showTab('urls')" class="tab-btn px-6 py-3 font-semibold border-b-3 border-transparent hover:border-yellow-400">
                        <i class="fas fa-link mr-2"></i>URLç®¡ç†
                    </button>
                    <button onclick="showTab('external')" class="tab-btn px-6 py-3 font-semibold border-b-3 border-transparent hover:border-yellow-400">
                        <i class="fas fa-cog mr-2"></i>å¤–éƒ¨é€£æº
                    </button>
                    <button onclick="showTab('logs')" class="tab-btn px-6 py-3 font-semibold border-b-3 border-transparent hover:border-yellow-400">
                        <i class="fas fa-file-alt mr-2"></i>ãƒ­ã‚°ç®¡ç†
                    </button>
                </div>
            </div>
        </nav>

        <!-- ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ -->
        <main class="container mx-auto px-4 py-8">
            <!-- ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ -->
            <div id="dashboardTab" class="tab-content">
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                    <div class="stats-card p-6 rounded-lg card-shadow">
                        <div class="flex items-center">
                            <div class="p-3 rounded-full bg-blue-100">
                                <i class="fas fa-users text-2xl text-blue-600"></i>
                            </div>
                            <div class="ml-4">
                                <h3 class="text-lg font-semibold text-gray-600">ç·ãƒ¦ãƒ¼ã‚¶ãƒ¼æ•°</h3>
                                <p class="text-3xl font-bold gold-text" id="totalUsers">0</p>
                            </div>
                        </div>
                    </div>
                    <div class="stats-card p-6 rounded-lg card-shadow">
                        <div class="flex items-center">
                            <div class="p-3 rounded-full bg-green-100">
                                <i class="fas fa-plus text-2xl text-green-600"></i>
                            </div>
                            <div class="ml-4">
                                <h3 class="text-lg font-semibold text-gray-600">è³¼å…¥ç”³è«‹</h3>
                                <p class="text-3xl font-bold gold-text" id="totalPurchases">0</p>
                            </div>
                        </div>
                    </div>
                    <div class="stats-card p-6 rounded-lg card-shadow">
                        <div class="flex items-center">
                            <div class="p-3 rounded-full bg-orange-100">
                                <i class="fas fa-exchange-alt text-2xl text-orange-600"></i>
                            </div>
                            <div class="ml-4">
                                <h3 class="text-lg font-semibold text-gray-600">æ›é‡‘ç”³è«‹</h3>
                                <p class="text-3xl font-bold gold-text" id="totalWithdrawals">0</p>
                            </div>
                        </div>
                    </div>
                    <div class="stats-card p-6 rounded-lg card-shadow">
                        <div class="flex items-center">
                            <div class="p-3 rounded-full bg-purple-100">
                                <i class="fas fa-coins text-2xl text-purple-600"></i>
                            </div>
                            <div class="ml-4">
                                <h3 class="text-lg font-semibold text-gray-600">ç·ãƒã‚¤ãƒ³ãƒˆæµé€š</h3>
                                <p class="text-3xl font-bold gold-text" id="totalPoints">0</p>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                    <div class="bg-white p-6 rounded-lg card-shadow">
                        <h3 class="text-xl font-bold mb-4 gold-text">å–å¼•æ¨ç§»</h3>
                        <canvas id="transactionChart" style="height: 300px;"></canvas>
                    </div>
                    <div class="bg-white p-6 rounded-lg card-shadow">
                        <h3 class="text-xl font-bold mb-4 gold-text">æ±ºæ¸ˆæ–¹æ³•åˆ¥å‰²åˆ</h3>
                        <canvas id="paymentMethodChart" style="height: 300px;"></canvas>
                    </div>
                </div>
            </div>

            <!-- ç”³è«‹ç®¡ç† -->
            <div id="applicationsTab" class="tab-content hidden">
                <div class="bg-white rounded-lg card-shadow">
                    <div class="border-b border-gray-200">
                        <nav class="-mb-px flex">
                            <button onclick="showApplicationTab('purchase')" class="app-tab-btn px-6 py-3 font-semibold border-b-2 border-transparent hover:border-yellow-400 active">è³¼å…¥ç”³è«‹</button>
                            <button onclick="showApplicationTab('withdraw')" class="app-tab-btn px-6 py-3 font-semibold border-b-2 border-transparent hover:border-yellow-400">æ›é‡‘ç”³è«‹</button>
                        </nav>
                    </div>
                    <div class="p-6">
                        <div id="purchaseApplications" class="app-tab-content">
                            <h3 class="text-xl font-bold mb-4 gold-text">è³¼å…¥ç”³è«‹ä¸€è¦§</h3>
                            <div id="purchaseList" class="space-y-4"></div>
                        </div>
                        <div id="withdrawApplications" class="app-tab-content hidden">
                            <h3 class="text-xl font-bold mb-4 gold-text">æ›é‡‘ç”³è«‹ä¸€è¦§</h3>
                            <div id="withdrawList" class="space-y-4"></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç† -->
            <div id="usersTab" class="tab-content hidden">
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                    <div class="bg-white p-6 rounded-lg card-shadow">
                        <h3 class="text-xl font-bold mb-4 gold-text">æ–°è¦ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½œæˆ</h3>
                        <form id="userCreateForm">
                            <div class="mb-4">
                                <label class="block text-gray-700 text-sm font-bold mb-2">é›»è©±ç•ªå·</label>
                                <input type="tel" id="newUserPhone" class="w-full px-3 py-2 border gold-border rounded-lg" required>
                            </div>
                            <div class="mb-4">
                                <label class="block text-gray-700 text-sm font-bold mb-2">ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰</label>
                                <input type="password" id="newUserPassword" class="w-full px-3 py-2 border gold-border rounded-lg" required>
                            </div>
                            <button type="submit" class="w-full btn-gold py-3 px-4 rounded-lg text-white font-bold">
                                <i class="fas fa-user-plus mr-2"></i>ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½œæˆ
                            </button>
                        </form>
                        <div class="mt-6">
                            <h4 class="text-lg font-bold mb-2 gold-text">CSVä¸€æ‹¬ã‚¤ãƒ³ãƒãƒ¼ãƒˆ</h4>
                            <input type="file" id="csvFile" accept=".csv" class="w-full px-3 py-2 border gold-border rounded-lg mb-2">
                            <button onclick="importCSV()" class="w-full bg-green-500 hover:bg-green-600 py-3 px-4 rounded-lg text-white font-bold">
                                <i class="fas fa-file-csv mr-2"></i>CSV ã‚¤ãƒ³ãƒãƒ¼ãƒˆ
                            </button>
                            <p class="text-sm text-gray-600 mt-2">â€» Aåˆ—:é›»è©±ç•ªå·, Båˆ—:ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰</p>
                        </div>
                    </div>
                    <div class="bg-white p-6 rounded-lg card-shadow">
                        <h3 class="text-xl font-bold mb-4 gold-text">ãƒ¦ãƒ¼ã‚¶ãƒ¼ä¸€è¦§</h3>
                        <div id="userList" class="space-y-2 max-h-96 overflow-y-auto"></div>
                    </div>
                </div>
            </div>

            <!-- æ±ºæ¸ˆè¨­å®š -->
            <div id="paymentsTab" class="tab-content hidden">
                <div class="space-y-6">
                    <!-- PayPayè¨­å®š -->
                    <div class="bg-white p-6 rounded-lg card-shadow">
                        <h3 class="text-xl font-bold mb-4 gold-text">PayPayè¨­å®š</h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <label class="block text-gray-700 text-sm font-bold mb-2">PayPay ID</label>
                                <input type="text" id="paypayId" class="w-full px-3 py-2 border gold-border rounded-lg">
                            </div>
                            <div>
                                <label class="block text-gray-700 text-sm font-bold mb-2">PayPay URL</label>
                                <input type="url" id="paypayUrl" class="w-full px-3 py-2 border gold-border rounded-lg">
                            </div>
                            <div>
                                <label class="block text-gray-700 text-sm font-bold mb-2">QRã‚³ãƒ¼ãƒ‰ç”»åƒURL</label>
                                <input type="url" id="paypayQR" class="w-full px-3 py-2 border gold-border rounded-lg">
                            </div>
                            <div>
                                <label class="block text-gray-700 text-sm font-bold mb-2">è¡¨ç¤ºè¨­å®š</label>
                                <select id="paypayDisplay" class="w-full px-3 py-2 border gold-border rounded-lg">
                                    <option value="true">è¡¨ç¤º</option>
                                    <option value="false">éè¡¨ç¤º</option>
                                </select>
                            </div>
                        </div>
                        <button onclick="savePayPay()" class="mt-4 btn-gold py-2 px-4 rounded-lg text-white font-bold">
                            <i class="fas fa-save mr-2"></i>ä¿å­˜
                        </button>
                    </div>

                    <!-- ä»®æƒ³é€šè²¨è¨­å®š -->
                    <div class="bg-white p-6 rounded-lg card-shadow">
                        <div class="flex justify-between items-center mb-4">
                            <h3 class="text-xl font-bold gold-text">ä»®æƒ³é€šè²¨è¨­å®š</h3>
                            <button onclick="addCrypto()" class="btn-gold py-2 px-4 rounded-lg text-white font-bold">
                                <i class="fas fa-plus mr-2"></i>é€šè²¨è¿½åŠ 
                            </button>
                        </div>
                        <div id="cryptoList" class="space-y-4"></div>
                    </div>

                    <!-- éŠ€è¡ŒæŒ¯è¾¼è¨­å®š -->
                    <div class="bg-white p-6 rounded-lg card-shadow">
                        <h3 class="text-xl font-bold mb-4 gold-text">éŠ€è¡ŒæŒ¯è¾¼è¨­å®š</h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <label class="block text-gray-700 text-sm font-bold mb-2">éŠ€è¡Œå</label>
                                <input type="text" id="bankName" class="w-full px-3 py-2 border gold-border rounded-lg">
                            </div>
                            <div>
                                <label class="block text-gray-700 text-sm font-bold mb-2">æ”¯åº—å</label>
                                <input type="text" id="bankBranch" class="w-full px-3 py-2 border gold-border rounded-lg">
                            </div>
                            <div>
                                <label class="block text-gray-700 text-sm font-bold mb-2">å£åº§ç¨®åˆ¥</label>
                                <select id="bankType" class="w-full px-3 py-2 border gold-border rounded-lg">
                                    <option value="æ™®é€š">æ™®é€š</option>
                                    <option value="å½“åº§">å½“åº§</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-gray-700 text-sm font-bold mb-2">å£åº§ç•ªå·</label>
                                <input type="text" id="bankAccount" class="w-full px-3 py-2 border gold-border rounded-lg">
                            </div>
                            <div>
                                <label class="block text-gray-700 text-sm font-bold mb-2">å£åº§åç¾©</label>
                                <input type="text" id="bankHolder" class="w-full px-3 py-2 border gold-border rounded-lg">
                            </div>
                        </div>
                        <button onclick="saveBank()" class="mt-4 btn-gold py-2 px-4 rounded-lg text-white font-bold">
                            <i class="fas fa-save mr-2"></i>ä¿å­˜
                        </button>
                    </div>

                    <!-- ã‚³ãƒ³ãƒ“ãƒ‹è¨­å®š -->
                    <div class="bg-white p-6 rounded-lg card-shadow">
                        <div class="flex justify-between items-center mb-4">
                            <h3 class="text-xl font-bold gold-text">ã‚³ãƒ³ãƒ“ãƒ‹è¨­å®š</h3>
                            <button onclick="addConvenience()" class="btn-gold py-2 px-4 rounded-lg text-white font-bold">
                                <i class="fas fa-plus mr-2"></i>ã‚³ãƒ³ãƒ“ãƒ‹è¿½åŠ 
                            </button>
                        </div>
                        <div id="convenienceList" class="space-y-4"></div>
                    </div>
                </div>
            </div>

            <!-- URLç®¡ç† -->
            <div id="urlsTab" class="tab-content hidden">
                <div class="bg-white p-6 rounded-lg card-shadow">
                    <div class="mb-6">
                        <div class="bg-yellow-50 border border-yellow-200 p-4 rounded-lg">
                            <h4 class="font-bold gold-text mb-2"><i class="fas fa-info-circle mr-2"></i>ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¢ã‚¯ã‚»ã‚¹ç”¨URL</h4>
                            <p class="text-gray-700 mb-2">ä»¥ä¸‹ã®URLã‚’ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«é…å¸ƒã—ã¦ãã ã•ã„ï¼š</p>
                            <div class="flex items-center space-x-2">
                                <input type="text" id="fixedUserURL" class="flex-1 px-3 py-2 border gold-border rounded-lg bg-white" readonly>
                                <button onclick="copyURL()" class="btn-gold py-2 px-4 rounded-lg text-white font-bold">
                                    <i class="fas fa-copy mr-2"></i>ã‚³ãƒ”ãƒ¼
                                </button>
                                <button onclick="generateQR()" class="bg-blue-500 hover:bg-blue-600 py-2 px-4 rounded-lg text-white font-bold">
                                    <i class="fas fa-qrcode mr-2"></i>QRã‚³ãƒ¼ãƒ‰
                                </button>
                            </div>
                        </div>
                    </div>
                    <div id="qrDisplay" class="text-center mb-6 hidden">
                        <h4 class="font-bold gold-text mb-2">QRã‚³ãƒ¼ãƒ‰</h4>
                        <div id="qrCanvas" class="qr-container bg-white p-4 rounded-lg card-shadow inline-block"></div>
                    </div>
                </div>
            </div>

            <!-- å¤–éƒ¨é€£æº -->
            <div id="externalTab" class="tab-content hidden">
                <div class="space-y-6">
                    <!-- Telegramè¨­å®š -->
                    <div class="bg-white p-6 rounded-lg card-shadow">
                        <h3 class="text-xl font-bold mb-4 gold-text">Telegramé€šçŸ¥è¨­å®š</h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                            <div>
                                <h4 class="text-lg font-semibold mb-3 text-green-600">è³¼å…¥ç”³è«‹ç”¨</h4>
                                <div class="space-y-3">
                                    <div>
                                        <label class="block text-gray-700 text-sm font-bold mb-2">BOT Token</label>
                                        <input type="text" id="purchaseBotToken" class="w-full px-3 py-2 border gold-border rounded-lg">
                                    </div>
                                    <div>
                                        <label class="block text-gray-700 text-sm font-bold mb-2">ãƒãƒ£ãƒƒãƒˆ/ã‚°ãƒ«ãƒ¼ãƒ—ID</label>
                                        <input type="text" id="purchaseChatId" class="w-full px-3 py-2 border gold-border rounded-lg">
                                    </div>
                                    <div>
                                        <label class="block text-gray-700 text-sm font-bold mb-2">ã‚¹ãƒ¬ãƒƒãƒ‰ID (ã‚ªãƒ—ã‚·ãƒ§ãƒ³)</label>
                                        <input type="text" id="purchaseThreadId" class="w-full px-3 py-2 border gold-border rounded-lg">
                                    </div>
                                    <div>
                                        <label class="block text-gray-700 text-sm font-bold mb-2">é€šçŸ¥æ–‡ç« </label>
                                        <textarea id="purchaseMessage" rows="3" class="w-full px-3 py-2 border gold-border rounded-lg" placeholder="ğŸ”” æ–°ã—ã„è³¼å…¥ç”³è«‹&#10;ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼: {phone}&#10;ğŸ’° é‡‘é¡: {amount}å††&#10;ğŸ’³ æ±ºæ¸ˆæ–¹æ³•: {method}&#10;ğŸ“… ç”³è«‹æ—¥æ™‚: {datetime}"></textarea>
                                    </div>
                                </div>
                            </div>
                            <div>
                                <h4 class="text-lg font-semibold mb-3 text-orange-600">æ›é‡‘ç”³è«‹ç”¨</h4>
                                <div class="space-y-3">
                                    <div>
                                        <label class="block text-gray-700 text-sm font-bold mb-2">BOT Token</label>
                                        <input type="text" id="withdrawBotToken" class="w-full px-3 py-2 border gold-border rounded-lg">
                                    </div>
                                    <div>
                                        <label class="block text-gray-700 text-sm font-bold mb-2">ãƒãƒ£ãƒƒãƒˆ/ã‚°ãƒ«ãƒ¼ãƒ—ID</label>
                                        <input type="text" id="withdrawChatId" class="w-full px-3 py-2 border gold-border rounded-lg">
                                    </div>
                                    <div>
                                        <label class="block text-gray-700 text-sm font-bold mb-2">ã‚¹ãƒ¬ãƒƒãƒ‰ID (ã‚ªãƒ—ã‚·ãƒ§ãƒ³)</label>
                                        <input type="text" id="withdrawThreadId" class="w-full px-3 py-2 border gold-border rounded-lg">
                                    </div>
                                    <div>
                                        <label class="block text-gray-700 text-sm font-bold mb-2">é€šçŸ¥æ–‡ç« </label>
                                        <textarea id="withdrawMessage" rows="3" class="w-full px-3 py-2 border gold-border rounded-lg" placeholder="ğŸ”„ æ–°ã—ã„æ›é‡‘ç”³è«‹&#10;ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼: {phone}&#10;ğŸ’° é‡‘é¡: {amount}å††&#10;ğŸ’³ å‡ºé‡‘æ–¹æ³•: {method}&#10;ğŸ“… ç”³è«‹æ—¥æ™‚: {datetime}"></textarea>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="mt-6 flex space-x-4">
                            <button onclick="saveTelegram()" class="btn-gold py-2 px-4 rounded-lg text-white font-bold">
                                <i class="fas fa-save mr-2"></i>ä¿å­˜
                            </button>
                            <button onclick="testTelegram('purchase')" class="bg-green-500 hover:bg-green-600 py-2 px-4 rounded-lg text-white font-bold">
                                <i class="fas fa-paper-plane mr-2"></i>è³¼å…¥ç”¨ãƒ†ã‚¹ãƒˆé€ä¿¡
                            </button>
                            <button onclick="testTelegram('withdraw')" class="bg-orange-500 hover:bg-orange-600 py-2 px-4 rounded-lg text-white font-bold">
                                <i class="fas fa-paper-plane mr-2"></i>æ›é‡‘ç”¨ãƒ†ã‚¹ãƒˆé€ä¿¡
                            </button>
                        </div>
                    </div>

                    <!-- GASè¨­å®š -->
                    <div class="bg-white p-6 rounded-lg card-shadow">
                        <h3 class="text-xl font-bold mb-4 gold-text">Google Apps Scripté€£æºè¨­å®š</h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <label class="block text-gray-700 text-sm font-bold mb-2">GAS Webã‚¢ãƒ—ãƒªURL</label>
                                <input type="url" id="gasUrl" class="w-full px-3 py-2 border gold-border rounded-lg" placeholder="https://script.google.com/macros/s/.../exec">
                            </div>
                            <div>
                                <label class="block text-gray-700 text-sm font-bold mb-2">èªè¨¼ãƒˆãƒ¼ã‚¯ãƒ³</label>
                                <input type="text" id="gasToken" class="w-full px-3 py-2 border gold-border rounded-lg">
                            </div>
                        </div>
                        <div class="mt-4 flex space-x-4">
                            <button onclick="saveGAS()" class="btn-gold py-2 px-4 rounded-lg text-white font-bold">
                                <i class="fas fa-save mr-2"></i>ä¿å­˜
                            </button>
                            <button onclick="testGAS()" class="bg-blue-500 hover:bg-blue-600 py-2 px-4 rounded-lg text-white font-bold">
                                <i class="fas fa-test-tube mr-2"></i>æ¥ç¶šãƒ†ã‚¹ãƒˆ
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ãƒ­ã‚°ç®¡ç† -->
            <div id="logsTab" class="tab-content hidden">
                <div class="bg-white p-6 rounded-lg card-shadow">
                    <h3 class="text-xl font-bold mb-4 gold-text">ã‚·ã‚¹ãƒ†ãƒ ãƒ­ã‚°</h3>
                    <div id="logsList" class="space-y-2 max-h-96 overflow-y-auto bg-gray-50 p-4 rounded-lg"></div>
                    <button onclick="clearLogs()" class="mt-4 bg-red-500 hover:bg-red-600 py-2 px-4 rounded-lg text-white font-bold">
                        <i class="fas fa-trash mr-2"></i>ãƒ­ã‚°ã‚¯ãƒªã‚¢
                    </button>
                </div>
            </div>
        </main>
    </div>

    <script>
        // ã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•°
        let currentUser = null;
        let currentTab = 'dashboard';
        let currentAppTab = 'purchase';
        
        // åˆæœŸåŒ–
        document.addEventListener('DOMContentLoaded', function() {
            initializeApp();
        });
        
        function initializeApp() {
            // URLãƒãƒƒã‚·ãƒ¥ã‚’ãƒã‚§ãƒƒã‚¯
            if (window.location.hash === '#user') {
                showUserScreen();
            } else {
                showLoginScreen();
            }
            
            // å›ºå®šãƒ¦ãƒ¼ã‚¶ãƒ¼URLã‚’è¨­å®š
            document.getElementById('fixedUserURL').value = window.location.origin + window.location.pathname + '#user';
            
            // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒ‡ãƒ¼ã‚¿ã®åˆæœŸåŒ–
            initializeDefaultData();
            
            // ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ã®è¨­å®š
            setupEventListeners();
            
            // ãƒãƒ£ãƒ¼ãƒˆã®åˆæœŸåŒ–
            initializeCharts();
            
            // ãƒ‡ãƒ¼ã‚¿ã®èª­ã¿è¾¼ã¿
            loadAllData();
        }
        
        function initializeDefaultData() {
            // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆç®¡ç†è€…
            if (!localStorage.getItem('admin')) {
                localStorage.setItem('admin', JSON.stringify({id: 'admin', password: 'admin123'}));
            }
            
            // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒ¦ãƒ¼ã‚¶ãƒ¼
            if (!localStorage.getItem('users')) {
                const defaultUser = {
                    '09012345678': {phone: '09012345678', password: 'user123', points: 0}
                };
                localStorage.setItem('users', JSON.stringify(defaultUser));
            }
            
            // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆæ±ºæ¸ˆè¨­å®š
            initializePaymentSettings();
        }
        
        function initializePaymentSettings() {
            if (!localStorage.getItem('paypay_settings')) {
                localStorage.setItem('paypay_settings', JSON.stringify({
                    id: '', url: '', qr: '', display: 'true'
                }));
            }
            
            if (!localStorage.getItem('crypto_settings')) {
                const defaultCrypto = {
                    'bitcoin': {name: 'Bitcoin', address: '', tag: '', display: 'true'},
                    'ethereum': {name: 'Ethereum', address: '', tag: '', display: 'true'},
                    'xrp': {name: 'XRP', address: '', tag: '', display: 'true'}
                };
                localStorage.setItem('crypto_settings', JSON.stringify(defaultCrypto));
            }
            
            if (!localStorage.getItem('convenience_settings')) {
                const defaultConvenience = {
                    'seven': {name: 'ã‚»ãƒ–ãƒ³ã‚¤ãƒ¬ãƒ–ãƒ³', code1: '', code2: '', display: 'true'},
                    'lawson': {name: 'ãƒ­ãƒ¼ã‚½ãƒ³', code1: '', code2: '', display: 'true'}
                };
                localStorage.setItem('convenience_settings', JSON.stringify(defaultConvenience));
            }
        }
        
        function setupEventListeners() {
            // ãƒ­ã‚°ã‚¤ãƒ³ãƒ•ã‚©ãƒ¼ãƒ 
            document.getElementById('loginForm').addEventListener('submit', function(e) {
                e.preventDefault();
                login();
            });
            
            // ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½œæˆãƒ•ã‚©ãƒ¼ãƒ 
            document.getElementById('userCreateForm').addEventListener('submit', function(e) {
                e.preventDefault();
                createUser();
            });
            
            // ãƒãƒƒã‚·ãƒ¥å¤‰æ›´ã®ç›£è¦–
            window.addEventListener('hashchange', function() {
                if (window.location.hash === '#user') {
                    showUserScreen();
                } else {
                    showLoginScreen();
                }
            });
        }
        
        // ç”»é¢è¡¨ç¤ºåˆ¶å¾¡
        function showLoginScreen() {
            document.getElementById('loginScreen').classList.remove('hidden');
            document.getElementById('userScreen').classList.add('hidden');
            document.getElementById('adminScreen').classList.add('hidden');
        }
        
        function showUserScreen() {
            document.getElementById('loginScreen').classList.add('hidden');
            document.getElementById('userScreen').classList.remove('hidden');
            document.getElementById('adminScreen').classList.add('hidden');
            loadUserPaymentOptions();
        }
        
        function showAdminScreen() {
            document.getElementById('loginScreen').classList.add('hidden');
            document.getElementById('userScreen').classList.add('hidden');
            document.getElementById('adminScreen').classList.remove('hidden');
            loadAllData();
        }
        
        // ãƒ­ã‚°ã‚¤ãƒ³æ©Ÿèƒ½
        function login() {
            const id = document.getElementById('adminId').value;
            const password = document.getElementById('adminPassword').value;
            
            const admin = JSON.parse(localStorage.getItem('admin'));
            
            if (id === admin.id && password === admin.password) {
                showAdminScreen();
                addLog('ç®¡ç†è€…ãƒ­ã‚°ã‚¤ãƒ³æˆåŠŸ', 'success');
            } else {
                alert('ãƒ­ã‚°ã‚¤ãƒ³æƒ…å ±ãŒæ­£ã—ãã‚ã‚Šã¾ã›ã‚“ã€‚');
                addLog('ç®¡ç†è€…ãƒ­ã‚°ã‚¤ãƒ³å¤±æ•—', 'error');
            }
        }
        
        function logout() {
            showLoginScreen();
            document.getElementById('adminId').value = '';
            document.getElementById('adminPassword').value = '';
            addLog('ç®¡ç†è€…ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ', 'info');
        }
        
        // ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ­ã‚°ã‚¤ãƒ³
        function userLogin() {
            const phone = document.getElementById('userPhone').value;
            const password = document.getElementById('userPassword').value;
            
            const users = JSON.parse(localStorage.getItem('users') || '{}');
            
            if (users[phone] && users[phone].password === password) {
                currentUser = users[phone];
                document.getElementById('userLoginForm').classList.add('hidden');
                document.getElementById('userDashboard').classList.remove('hidden');
                document.getElementById('userPoints').textContent = (currentUser.points || 0) + ' PT';
                addLog(`ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ­ã‚°ã‚¤ãƒ³: ${phone}`, 'success');
            } else {
                alert('ãƒ­ã‚°ã‚¤ãƒ³æƒ…å ±ãŒæ­£ã—ãã‚ã‚Šã¾ã›ã‚“ã€‚');
                addLog(`ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ­ã‚°ã‚¤ãƒ³å¤±æ•—: ${phone}`, 'error');
            }
        }
        
        function userLogout() {
            currentUser = null;
            document.getElementById('userLoginForm').classList.remove('hidden');
            document.getElementById('userDashboard').classList.add('hidden');
            document.getElementById('userPhone').value = '';
            document.getElementById('userPassword').value = '';
            hidePurchaseForm();
            hideWithdrawForm();
        }
        
        // ã‚¿ãƒ–ç®¡ç†
        function showTab(tabName) {
            // ã™ã¹ã¦ã®ã‚¿ãƒ–ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’éš ã™
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.add('hidden');
            });
            
            // ã™ã¹ã¦ã®ã‚¿ãƒ–ãƒœã‚¿ãƒ³ã‹ã‚‰activeã‚¯ãƒ©ã‚¹ã‚’å‰Šé™¤
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('active', 'border-yellow-400');
                btn.classList.add('border-transparent');
            });
            
            // é¸æŠã•ã‚ŒãŸã‚¿ãƒ–ã‚’è¡¨ç¤º
            document.getElementById(tabName + 'Tab').classList.remove('hidden');
            
            // é¸æŠã•ã‚ŒãŸã‚¿ãƒ–ãƒœã‚¿ãƒ³ã«activeã‚¯ãƒ©ã‚¹ã‚’è¿½åŠ 
            event.target.classList.add('active', 'border-yellow-400');
            event.target.classList.remove('border-transparent');
            
            currentTab = tabName;
            
            // ã‚¿ãƒ–å›ºæœ‰ã®å‡¦ç†
            if (tabName === 'dashboard') {
                updateDashboard();
                updateCharts();
            } else if (tabName === 'applications') {
                loadApplications();
            } else if (tabName === 'users') {
                loadUserList();
            } else if (tabName === 'payments') {
                loadPaymentSettings();
            }
        }
        
        function showApplicationTab(tabName) {
            document.querySelectorAll('.app-tab-content').forEach(tab => {
                tab.classList.add('hidden');
            });
            
            document.querySelectorAll('.app-tab-btn').forEach(btn => {
                btn.classList.remove('active', 'border-yellow-400');
                btn.classList.add('border-transparent');
            });
            
            document.getElementById(tabName + 'Applications').classList.remove('hidden');
            event.target.classList.add('active', 'border-yellow-400');
            event.target.classList.remove('border-transparent');
            
            currentAppTab = tabName;
            loadApplications();
        }
        
        // ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†
        function createUser() {
            const phone = document.getElementById('newUserPhone').value;
            const password = document.getElementById('newUserPassword').value;
            
            if (!phone || !password) {
                alert('é›»è©±ç•ªå·ã¨ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚');
                return;
            }
            
            const users = JSON.parse(localStorage.getItem('users') || '{}');
            
            if (users[phone]) {
                alert('ã“ã®é›»è©±ç•ªå·ã¯æ—¢ã«ç™»éŒ²ã•ã‚Œã¦ã„ã¾ã™ã€‚');
                return;
            }
            
            users[phone] = {
                phone: phone,
                password: password,
                points: 0,
                createdAt: new Date().toISOString()
            };
            
            localStorage.setItem('users', JSON.stringify(users));
            
            document.getElementById('newUserPhone').value = '';
            document.getElementById('newUserPassword').value = '';
            
            loadUserList();
            updateDashboard();
            addLog(`ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½œæˆ: ${phone}`, 'success');
            
            alert('ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒä½œæˆã•ã‚Œã¾ã—ãŸã€‚');
        }
        
        function importCSV() {
            const fileInput = document.getElementById('csvFile');
            const file = fileInput.files[0];
            
            if (!file) {
                alert('CSVãƒ•ã‚¡ã‚¤ãƒ«ã‚’é¸æŠã—ã¦ãã ã•ã„ã€‚');
                return;
            }
            
            const reader = new FileReader();
            reader.onload = function(e) {
                const csv = e.target.result;
                const lines = csv.split('\n');
                const users = JSON.parse(localStorage.getItem('users') || '{}');
                let importCount = 0;
                
                for (let i = 1; i < lines.length; i++) { // ãƒ˜ãƒƒãƒ€ãƒ¼ã‚’ã‚¹ã‚­ãƒƒãƒ—
                    const line = lines[i].trim();
                    if (line) {
                        const [phone, password] = line.split(',');
                        if (phone && password && !users[phone]) {
                            users[phone] = {
                                phone: phone,
                                password: password,
                                points: 0,
                                createdAt: new Date().toISOString()
                            };
                            importCount++;
                        }
                    }
                }
                
                localStorage.setItem('users', JSON.stringify(users));
                fileInput.value = '';
                loadUserList();
                updateDashboard();
                addLog(`CSVä¸€æ‹¬ã‚¤ãƒ³ãƒãƒ¼ãƒˆ: ${importCount}ä»¶`, 'success');
                alert(`${importCount}ä»¶ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆã—ã¾ã—ãŸã€‚`);
            };
            
            reader.readAsText(file);
        }
        
        function loadUserList() {
            const users = JSON.parse(localStorage.getItem('users') || '{}');
            const userList = document.getElementById('userList');
            userList.innerHTML = '';
            
            Object.values(users).forEach(user => {
                const userDiv = document.createElement('div');
                userDiv.className = 'flex justify-between items-center p-3 bg-gray-50 rounded-lg';
                userDiv.innerHTML = `
                    <div>
                        <span class="font-semibold">${user.phone}</span>
                        <span class="text-sm text-gray-600 ml-2">${user.points || 0} PT</span>
                    </div>
                    <div class="space-x-2">
                        <button onclick="resetUserPassword('${user.phone}')" class="text-blue-500 hover:text-blue-700">
                            <i class="fas fa-key"></i> ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãƒªã‚»ãƒƒãƒˆ
                        </button>
                        <button onclick="deleteUser('${user.phone}')" class="text-red-500 hover:text-red-700">
                            <i class="fas fa-trash"></i> å‰Šé™¤
                        </button>
                    </div>
                `;
                userList.appendChild(userDiv);
            });
        }
        
        function resetUserPassword(phone) {
            const newPassword = prompt('æ–°ã—ã„ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„:');
            if (newPassword) {
                const users = JSON.parse(localStorage.getItem('users') || '{}');
                if (users[phone]) {
                    users[phone].password = newPassword;
                    localStorage.setItem('users', JSON.stringify(users));
                    addLog(`ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãƒªã‚»ãƒƒãƒˆ: ${phone}`, 'info');
                    alert('ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’æ›´æ–°ã—ã¾ã—ãŸã€‚');
                }
            }
        }
        
        function deleteUser(phone) {
            if (confirm('ã“ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ')) {
                const users = JSON.parse(localStorage.getItem('users') || '{}');
                delete users[phone];
                localStorage.setItem('users', JSON.stringify(users));
                loadUserList();
                updateDashboard();
                addLog(`ãƒ¦ãƒ¼ã‚¶ãƒ¼å‰Šé™¤: ${phone}`, 'info');
                alert('ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’å‰Šé™¤ã—ã¾ã—ãŸã€‚');
            }
        }
        
        // æ±ºæ¸ˆè¨­å®šç®¡ç†
        function loadPaymentSettings() {
            // PayPayè¨­å®š
            const paypay = JSON.parse(localStorage.getItem('paypay_settings') || '{}');
            document.getElementById('paypayId').value = paypay.id || '';
            document.getElementById('paypayUrl').value = paypay.url || '';
            document.getElementById('paypayQR').value = paypay.qr || '';
            document.getElementById('paypayDisplay').value = paypay.display || 'true';
            
            // éŠ€è¡Œè¨­å®š
            const bank = JSON.parse(localStorage.getItem('bank_settings') || '{}');
            document.getElementById('bankName').value = bank.name || '';
            document.getElementById('bankBranch').value = bank.branch || '';
            document.getElementById('bankType').value = bank.type || 'æ™®é€š';
            document.getElementById('bankAccount').value = bank.account || '';
            document.getElementById('bankHolder').value = bank.holder || '';
            
            // ä»®æƒ³é€šè²¨è¨­å®š
            loadCryptoSettings();
            
            // ã‚³ãƒ³ãƒ“ãƒ‹è¨­å®š
            loadConvenienceSettings();
            
            // Telegramè¨­å®š
            const telegram = JSON.parse(localStorage.getItem('telegram_settings') || '{}');
            document.getElementById('purchaseBotToken').value = telegram.purchase?.botToken || '';
            document.getElementById('purchaseChatId').value = telegram.purchase?.chatId || '';
            document.getElementById('purchaseThreadId').value = telegram.purchase?.threadId || '';
            document.getElementById('purchaseMessage').value = telegram.purchase?.message || '';
            document.getElementById('withdrawBotToken').value = telegram.withdraw?.botToken || '';
            document.getElementById('withdrawChatId').value = telegram.withdraw?.chatId || '';
            document.getElementById('withdrawThreadId').value = telegram.withdraw?.threadId || '';
            document.getElementById('withdrawMessage').value = telegram.withdraw?.message || '';
            
            // GASè¨­å®š
            const gas = JSON.parse(localStorage.getItem('gas_settings') || '{}');
            document.getElementById('gasUrl').value = gas.url || '';
            document.getElementById('gasToken').value = gas.token || '';
        }
        
        function savePayPay() {
            const settings = {
                id: document.getElementById('paypayId').value,
                url: document.getElementById('paypayUrl').value,
                qr: document.getElementById('paypayQR').value,
                display: document.getElementById('paypayDisplay').value
            };
            
            localStorage.setItem('paypay_settings', JSON.stringify(settings));
            addLog('PayPayè¨­å®šä¿å­˜', 'success');
            alert('PayPayè¨­å®šã‚’ä¿å­˜ã—ã¾ã—ãŸã€‚');
        }
        
        function saveBank() {
            const settings = {
                name: document.getElementById('bankName').value,
                branch: document.getElementById('bankBranch').value,
                type: document.getElementById('bankType').value,
                account: document.getElementById('bankAccount').value,
                holder: document.getElementById('bankHolder').value
            };
            
            localStorage.setItem('bank_settings', JSON.stringify(settings));
            addLog('éŠ€è¡Œè¨­å®šä¿å­˜', 'success');
            alert('éŠ€è¡Œè¨­å®šã‚’ä¿å­˜ã—ã¾ã—ãŸã€‚');
        }
        
        function loadCryptoSettings() {
            const cryptoSettings = JSON.parse(localStorage.getItem('crypto_settings') || '{}');
            const cryptoList = document.getElementById('cryptoList');
            cryptoList.innerHTML = '';
            
            Object.entries(cryptoSettings).forEach(([key, crypto]) => {
                const cryptoDiv = document.createElement('div');
                cryptoDiv.className = 'border gold-border p-4 rounded-lg';
                cryptoDiv.innerHTML = `
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
                        <div>
                            <label class="block text-gray-700 text-sm font-bold mb-2">é€šè²¨å</label>
                            <input type="text" value="${crypto.name || ''}" onchange="updateCrypto('${key}', 'name', this.value)" class="w-full px-3 py-2 border gold-border rounded-lg">
                        </div>
                        <div>
                            <label class="block text-gray-700 text-sm font-bold mb-2">ã‚¦ã‚©ãƒ¬ãƒƒãƒˆã‚¢ãƒ‰ãƒ¬ã‚¹</label>
                            <input type="text" value="${crypto.address || ''}" onchange="updateCrypto('${key}', 'address', this.value)" class="w-full px-3 py-2 border gold-border rounded-lg">
                        </div>
                        <div>
                            <label class="block text-gray-700 text-sm font-bold mb-2">ã‚¿ã‚° (XRPç­‰)</label>
                            <input type="text" value="${crypto.tag || ''}" onchange="updateCrypto('${key}', 'tag', this.value)" class="w-full px-3 py-2 border gold-border rounded-lg">
                        </div>
                        <div>
                            <label class="block text-gray-700 text-sm font-bold mb-2">è¡¨ç¤ºè¨­å®š</label>
                            <div class="flex items-center space-x-4">
                                <select onchange="updateCrypto('${key}', 'display', this.value)" class="flex-1 px-3 py-2 border gold-border rounded-lg">
                                    <option value="true" ${crypto.display === 'true' ? 'selected' : ''}>è¡¨ç¤º</option>
                                    <option value="false" ${crypto.display === 'false' ? 'selected' : ''}>éè¡¨ç¤º</option>
                                </select>
                                <button onclick="deleteCrypto('${key}')" class="text-red-500 hover:text-red-700">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                `;
                cryptoList.appendChild(cryptoDiv);
            });
        }
        
        function addCrypto() {
            const name = prompt('é€šè²¨åã‚’å…¥åŠ›ã—ã¦ãã ã•ã„:');
            if (name) {
                const key = 'crypto_' + Date.now();
                const cryptoSettings = JSON.parse(localStorage.getItem('crypto_settings') || '{}');
                cryptoSettings[key] = {
                    name: name,
                    address: '',
                    tag: '',
                    display: 'true'
                };
                localStorage.setItem('crypto_settings', JSON.stringify(cryptoSettings));
                loadCryptoSettings();
                addLog(`ä»®æƒ³é€šè²¨è¿½åŠ : ${name}`, 'success');
            }
        }
        
        function updateCrypto(key, field, value) {
            const cryptoSettings = JSON.parse(localStorage.getItem('crypto_settings') || '{}');
            if (cryptoSettings[key]) {
                cryptoSettings[key][field] = value;
                localStorage.setItem('crypto_settings', JSON.stringify(cryptoSettings));
            }
        }
        
        function deleteCrypto(key) {
            if (confirm('ã“ã®ä»®æƒ³é€šè²¨è¨­å®šã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ')) {
                const cryptoSettings = JSON.parse(localStorage.getItem('crypto_settings') || '{}');
                delete cryptoSettings[key];
                localStorage.setItem('crypto_settings', JSON.stringify(cryptoSettings));
                loadCryptoSettings();
                addLog(`ä»®æƒ³é€šè²¨å‰Šé™¤: ${key}`, 'info');
            }
        }
        
        function loadConvenienceSettings() {
            const convenienceSettings = JSON.parse(localStorage.getItem('convenience_settings') || '{}');
            const convenienceList = document.getElementById('convenienceList');
            convenienceList.innerHTML = '';
            
            Object.entries(convenienceSettings).forEach(([key, convenience]) => {
                const convenienceDiv = document.createElement('div');
                convenienceDiv.className = 'border gold-border p-4 rounded-lg';
                convenienceDiv.innerHTML = `
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
                        <div>
                            <label class="block text-gray-700 text-sm font-bold mb-2">ã‚³ãƒ³ãƒ“ãƒ‹å</label>
                            <input type="text" value="${convenience.name || ''}" onchange="updateConvenience('${key}', 'name', this.value)" class="w-full px-3 py-2 border gold-border rounded-lg">
                        </div>
                        <div>
                            <label class="block text-gray-700 text-sm font-bold mb-2">ã‚³ãƒ¼ãƒ‰1</label>
                            <input type="text" value="${convenience.code1 || ''}" onchange="updateConvenience('${key}', 'code1', this.value)" class="w-full px-3 py-2 border gold-border rounded-lg">
                        </div>
                        <div>
                            <label class="block text-gray-700 text-sm font-bold mb-2">ã‚³ãƒ¼ãƒ‰2</label>
                            <input type="text" value="${convenience.code2 || ''}" onchange="updateConvenience('${key}', 'code2', this.value)" class="w-full px-3 py-2 border gold-border rounded-lg">
                        </div>
                        <div>
                            <label class="block text-gray-700 text-sm font-bold mb-2">è¡¨ç¤ºè¨­å®š</label>
                            <div class="flex items-center space-x-4">
                                <select onchange="updateConvenience('${key}', 'display', this.value)" class="flex-1 px-3 py-2 border gold-border rounded-lg">
                                    <option value="true" ${convenience.display === 'true' ? 'selected' : ''}>è¡¨ç¤º</option>
                                    <option value="false" ${convenience.display === 'false' ? 'selected' : ''}>éè¡¨ç¤º</option>
                                </select>
                                <button onclick="deleteConvenience('${key}')" class="text-red-500 hover:text-red-700">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                `;
                convenienceList.appendChild(convenienceDiv);
            });
        }
        
        function addConvenience() {
            const name = prompt('ã‚³ãƒ³ãƒ“ãƒ‹åã‚’å…¥åŠ›ã—ã¦ãã ã•ã„:');
            if (name) {
                const key = 'convenience_' + Date.now();
                const convenienceSettings = JSON.parse(localStorage.getItem('convenience_settings') || '{}');
                convenienceSettings[key] = {
                    name: name,
                    code1: '',
                    code2: '',
                    display: 'true'
                };
                localStorage.setItem('convenience_settings', JSON.stringify(convenienceSettings));
                loadConvenienceSettings();
                addLog(`ã‚³ãƒ³ãƒ“ãƒ‹è¿½åŠ : ${name}`, 'success');
            }
        }
        
        function updateConvenience(key, field, value) {
            const convenienceSettings = JSON.parse(localStorage.getItem('convenience_settings') || '{}');
            if (convenienceSettings[key]) {
                convenienceSettings[key][field] = value;
                localStorage.setItem('convenience_settings', JSON.stringify(convenienceSettings));
            }
        }
        
        function deleteConvenience(key) {
            if (confirm('ã“ã®ã‚³ãƒ³ãƒ“ãƒ‹è¨­å®šã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ')) {
                const convenienceSettings = JSON.parse(localStorage.getItem('convenience_settings') || '{}');
                delete convenienceSettings[key];
                localStorage.setItem('convenience_settings', JSON.stringify(convenienceSettings));
                loadConvenienceSettings();
                addLog(`ã‚³ãƒ³ãƒ“ãƒ‹å‰Šé™¤: ${key}`, 'info');
            }
        }
        
        // Telegramè¨­å®š
        function saveTelegram() {
            const settings = {
                purchase: {
                    botToken: document.getElementById('purchaseBotToken').value,
                    chatId: document.getElementById('purchaseChatId').value,
                    threadId: document.getElementById('purchaseThreadId').value,
                    message: document.getElementById('purchaseMessage').value
                },
                withdraw: {
                    botToken: document.getElementById('withdrawBotToken').value,
                    chatId: document.getElementById('withdrawChatId').value,
                    threadId: document.getElementById('withdrawThreadId').value,
                    message: document.getElementById('withdrawMessage').value
                }
            };
            
            localStorage.setItem('telegram_settings', JSON.stringify(settings));
            addLog('Telegramè¨­å®šä¿å­˜', 'success');
            alert('Telegramè¨­å®šã‚’ä¿å­˜ã—ã¾ã—ãŸã€‚');
        }
        
        function testTelegram(type) {
            const settings = JSON.parse(localStorage.getItem('telegram_settings') || '{}');
            const config = settings[type];
            
            if (!config || !config.botToken || !config.chatId) {
                alert('Telegramè¨­å®šãŒä¸å®Œå…¨ã§ã™ã€‚');
                return;
            }
            
            const message = `ğŸ§ª ãƒ†ã‚¹ãƒˆé€šçŸ¥ (${type === 'purchase' ? 'è³¼å…¥' : 'æ›é‡‘'}ç”¨)\nğŸ“… ${new Date().toLocaleString()}`;
            
            sendTelegramMessage(config, message)
                .then(() => {
                    alert('ãƒ†ã‚¹ãƒˆé€ä¿¡ãŒå®Œäº†ã—ã¾ã—ãŸã€‚');
                    addLog(`Telegramãƒ†ã‚¹ãƒˆé€ä¿¡æˆåŠŸ: ${type}`, 'success');
                })
                .catch(error => {
                    alert('é€ä¿¡ã«å¤±æ•—ã—ã¾ã—ãŸ: ' + error);
                    addLog(`Telegramãƒ†ã‚¹ãƒˆé€ä¿¡å¤±æ•—: ${type} - ${error}`, 'error');
                });
        }
        
        function sendTelegramMessage(config, message) {
            const url = `https://api.telegram.org/bot${config.botToken}/sendMessage`;
            const data = {
                chat_id: config.chatId,
                text: message,
                ...(config.threadId && { message_thread_id: config.threadId })
            };
            
            return fetch(url, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(data)
            }).then(response => {
                if (!response.ok) {
                    throw new Error('é€ä¿¡å¤±æ•—');
                }
                return response.json();
            });
        }
        
        // GASè¨­å®š
        function saveGAS() {
            const settings = {
                url: document.getElementById('gasUrl').value,
                token: document.getElementById('gasToken').value
            };
            
            localStorage.setItem('gas_settings', JSON.stringify(settings));
            addLog('GASè¨­å®šä¿å­˜', 'success');
            alert('GASè¨­å®šã‚’ä¿å­˜ã—ã¾ã—ãŸã€‚');
        }
        
        function testGAS() {
            const settings = JSON.parse(localStorage.getItem('gas_settings') || '{}');
            
            if (!settings.url) {
                alert('GAS URLãŒè¨­å®šã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚');
                return;
            }
            
            const testData = {
                type: 'test',
                timestamp: new Date().toISOString(),
                token: settings.token
            };
            
            fetch(settings.url, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(testData)
            })
            .then(response => response.text())
            .then(result => {
                alert('æ¥ç¶šãƒ†ã‚¹ãƒˆå®Œäº†: ' + result);
                addLog('GASæ¥ç¶šãƒ†ã‚¹ãƒˆæˆåŠŸ', 'success');
            })
            .catch(error => {
                alert('æ¥ç¶šãƒ†ã‚¹ãƒˆã«å¤±æ•—ã—ã¾ã—ãŸ: ' + error);
                addLog('GASæ¥ç¶šãƒ†ã‚¹ãƒˆå¤±æ•—: ' + error, 'error');
            });
        }
        
        // URLç®¡ç†
        function copyURL() {
            const urlInput = document.getElementById('fixedUserURL');
            urlInput.select();
            document.execCommand('copy');
            alert('URLã‚’ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸã€‚');
            addLog('ãƒ¦ãƒ¼ã‚¶ãƒ¼URLã‚³ãƒ”ãƒ¼', 'info');
        }
        
        function generateQR() {
            const url = document.getElementById('fixedUserURL').value;
            const qrCanvas = document.getElementById('qrCanvas');
            const qrDisplay = document.getElementById('qrDisplay');
            
            qrCanvas.innerHTML = '';
            
            QRCode.toCanvas(qrCanvas, url, {
                width: 200,
                margin: 2
            }, function (error) {
                if (error) {
                    console.error(error);
                    alert('QRã‚³ãƒ¼ãƒ‰ã®ç”Ÿæˆã«å¤±æ•—ã—ã¾ã—ãŸã€‚');
                } else {
                    qrDisplay.classList.remove('hidden');
                    addLog('QRã‚³ãƒ¼ãƒ‰ç”Ÿæˆ', 'info');
                }
            });
        }
        
        // ãƒ¦ãƒ¼ã‚¶ãƒ¼ç”»é¢ã§ã®è³¼å…¥ãƒ»æ›é‡‘
        function loadUserPaymentOptions() {
            // ä»®æƒ³é€šè²¨ã‚ªãƒ—ã‚·ãƒ§ãƒ³
            const cryptoSettings = JSON.parse(localStorage.getItem('crypto_settings') || '{}');
            const cryptoSelect = document.getElementById('cryptoType');
            cryptoSelect.innerHTML = '<option value="">é¸æŠã—ã¦ãã ã•ã„</option>';
            
            Object.entries(cryptoSettings).forEach(([key, crypto]) => {
                if (crypto.display === 'true') {
                    const option = document.createElement('option');
                    option.value = key;
                    option.textContent = crypto.name;
                    cryptoSelect.appendChild(option);
                }
            });
            
            // ã‚³ãƒ³ãƒ“ãƒ‹ã‚ªãƒ—ã‚·ãƒ§ãƒ³
            const convenienceSettings = JSON.parse(localStorage.getItem('convenience_settings') || '{}');
            const convenienceSelect = document.getElementById('convenienceType');
            convenienceSelect.innerHTML = '<option value="">é¸æŠã—ã¦ãã ã•ã„</option>';
            
            Object.entries(convenienceSettings).forEach(([key, convenience]) => {
                if (convenience.display === 'true') {
                    const option = document.createElement('option');
                    option.value = key;
                    option.textContent = convenience.name;
                    convenienceSelect.appendChild(option);
                }
            });
        }
        
        function showPurchaseForm() {
            document.getElementById('purchaseForm').classList.remove('hidden');
            hideWithdrawForm();
            document.getElementById('paymentInfo').classList.add('hidden');
        }
        
        function hidePurchaseForm() {
            document.getElementById('purchaseForm').classList.add('hidden');
            document.getElementById('paymentInfo').classList.add('hidden');
        }
        
        function showWithdrawForm() {
            document.getElementById('withdrawForm').classList.remove('hidden');
            hidePurchaseForm();
            document.getElementById('paymentInfo').classList.add('hidden');
        }
        
        function hideWithdrawForm() {
            document.getElementById('withdrawForm').classList.add('hidden');
            document.getElementById('paymentInfo').classList.add('hidden');
        }
        
        function showPaymentInfo() {
            const method = document.getElementById('purchaseMethod').value;
            const cryptoSelect = document.getElementById('cryptoSelect');
            const convenienceSelect = document.getElementById('convenienceSelect');
            
            cryptoSelect.classList.add('hidden');
            convenienceSelect.classList.add('hidden');
            
            if (method === 'crypto') {
                cryptoSelect.classList.remove('hidden');
            } else if (method === 'convenience') {
                convenienceSelect.classList.remove('hidden');
            }
        }
        
        function submitPurchase() {
            const amount = parseInt(document.getElementById('purchaseAmount').value);
            const method = document.getElementById('purchaseMethod').value;
            
            if (!amount || amount < 2000) {
                alert('2,000å††ä»¥ä¸Šã®é‡‘é¡ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚');
                return;
            }
            
            if (!method) {
                alert('æ±ºæ¸ˆæ–¹æ³•ã‚’é¸æŠã—ã¦ãã ã•ã„ã€‚');
                return;
            }
            
            if (method === 'crypto' && !document.getElementById('cryptoType').value) {
                alert('ä»®æƒ³é€šè²¨ã‚’é¸æŠã—ã¦ãã ã•ã„ã€‚');
                return;
            }
            
            if (method === 'convenience' && !document.getElementById('convenienceType').value) {
                alert('ã‚³ãƒ³ãƒ“ãƒ‹ã‚’é¸æŠã—ã¦ãã ã•ã„ã€‚');
                return;
            }
            
            // ç”³è«‹ã‚’ä½œæˆ
            const application = {
                id: 'purchase_' + Date.now(),
                type: 'purchase',
                user: currentUser.phone,
                amount: amount,
                method: method,
                cryptoType: method === 'crypto' ? document.getElementById('cryptoType').value : null,
                convenienceType: method === 'convenience' ? document.getElementById('convenienceType').value : null,
                status: 'pending',
                createdAt: new Date().toISOString()
            };
            
            // ç”³è«‹ã‚’ä¿å­˜
            const applications = JSON.parse(localStorage.getItem('applications') || '[]');
            applications.push(application);
            localStorage.setItem('applications', JSON.stringify(applications));
            
            // æ±ºæ¸ˆæƒ…å ±ã‚’è¡¨ç¤º
            displayPaymentInfo(application);
            
            // Telegramé€šçŸ¥
            sendPurchaseNotification(application);
            
            // GASã«é€ä¿¡
            sendToGAS(application);
            
            addLog(`è³¼å…¥ç”³è«‹: ${currentUser.phone} - ${amount}å††`, 'success');
            alert('è³¼å…¥ç”³è«‹ã‚’é€ä¿¡ã—ã¾ã—ãŸã€‚æ±ºæ¸ˆæƒ…å ±ã‚’ã”ç¢ºèªãã ã•ã„ã€‚');
        }
        
        function submitWithdraw() {
            const amount = parseInt(document.getElementById('withdrawAmount').value);
            const method = document.getElementById('withdrawMethod').value;
            
            if (!amount || amount < 4000) {
                alert('4,000å††ä»¥ä¸Šã®é‡‘é¡ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚');
                return;
            }
            
            if (!method) {
                alert('å‡ºé‡‘æ–¹æ³•ã‚’é¸æŠã—ã¦ãã ã•ã„ã€‚');
                return;
            }
            
            if (amount > (currentUser.points || 0)) {
                alert('ãƒã‚¤ãƒ³ãƒˆæ®‹é«˜ãŒä¸è¶³ã—ã¦ã„ã¾ã™ã€‚');
                return;
            }
            
            // ç”³è«‹ã‚’ä½œæˆ
            const application = {
                id: 'withdraw_' + Date.now(),
                type: 'withdraw',
                user: currentUser.phone,
                amount: amount,
                method: method,
                status: 'pending',
                createdAt: new Date().toISOString()
            };
            
            // ç”³è«‹ã‚’ä¿å­˜
            const applications = JSON.parse(localStorage.getItem('applications') || '[]');
            applications.push(application);
            localStorage.setItem('applications', JSON.stringify(applications));
            
            hideWithdrawForm();
            
            // Telegramé€šçŸ¥
            sendWithdrawNotification(application);
            
            // GASã«é€ä¿¡
            sendToGAS(application);
            
            addLog(`æ›é‡‘ç”³è«‹: ${currentUser.phone} - ${amount}å††`, 'success');
            alert('æ›é‡‘ç”³è«‹ã‚’é€ä¿¡ã—ã¾ã—ãŸã€‚å‡¦ç†ã‚’ãŠå¾…ã¡ãã ã•ã„ã€‚');
        }
        
        function displayPaymentInfo(application) {
            const paymentDetails = document.getElementById('paymentDetails');
            const qrContainer = document.getElementById('qrCodeContainer');
            let html = '';
            
            switch (application.method) {
                case 'paypay':
                    const paypay = JSON.parse(localStorage.getItem('paypay_settings') || '{}');
                    html = `
                        <div class="space-y-3">
                            <div class="flex justify-between">
                                <span class="font-semibold">PayPay ID:</span>
                                <span class="flex items-center">
                                    ${paypay.id || 'N/A'}
                                    <button onclick="copyToClipboard('${paypay.id}')" class="ml-2 text-blue-500">
                                        <i class="fas fa-copy"></i>
                                    </button>
                                </span>
                            </div>
                            ${paypay.url ? `
                                <div class="flex justify-between">
                                    <span class="font-semibold">PayPay URL:</span>
                                    <a href="${paypay.url}" target="_blank" class="text-blue-500 hover:underline">
                                        PayPayã§é–‹ã <i class="fas fa-external-link-alt"></i>
                                    </a>
                                </div>
                            ` : ''}
                            <div class="flex justify-between">
                                <span class="font-semibold">é‡‘é¡:</span>
                                <span class="flex items-center">
                                    ${application.amount.toLocaleString()}å††
                                    <button onclick="copyToClipboard('${application.amount}')" class="ml-2 text-blue-500">
                                        <i class="fas fa-copy"></i>
                                    </button>
                                </span>
                            </div>
                        </div>
                    `;
                    if (paypay.qr) {
                        qrContainer.innerHTML = `<img src="${paypay.qr}" alt="PayPay QR" class="max-w-full">`;
                        qrContainer.classList.remove('hidden');
                    }
                    break;
                    
                case 'crypto':
                    const cryptoSettings = JSON.parse(localStorage.getItem('crypto_settings') || '{}');
                    const crypto = cryptoSettings[application.cryptoType];
                    if (crypto) {
                        html = `
                            <div class="space-y-3">
                                <div class="flex justify-between">
                                    <span class="font-semibold">é€šè²¨:</span>
                                    <span>${crypto.name}</span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="font-semibold">ã‚¢ãƒ‰ãƒ¬ã‚¹:</span>
                                    <span class="flex items-center">
                                        ${crypto.address.substring(0, 20)}...
                                        <button onclick="copyToClipboard('${crypto.address}')" class="ml-2 text-blue-500">
                                            <i class="fas fa-copy"></i>
                                        </button>
                                    </span>
                                </div>
                                ${crypto.tag ? `
                                    <div class="flex justify-between">
                                        <span class="font-semibold">ã‚¿ã‚°:</span>
                                        <span class="flex items-center">
                                            ${crypto.tag}
                                            <button onclick="copyToClipboard('${crypto.tag}')" class="ml-2 text-blue-500">
                                                <i class="fas fa-copy"></i>
                                            </button>
                                        </span>
                                    </div>
                                ` : ''}
                                <div class="flex justify-between">
                                    <span class="font-semibold">é‡‘é¡:</span>
                                    <span class="flex items-center">
                                        ${application.amount.toLocaleString()}å††
                                        <button onclick="copyToClipboard('${application.amount}')" class="ml-2 text-blue-500">
                                            <i class="fas fa-copy"></i>
                                        </button>
                                    </span>
                                </div>
                            </div>
                        `;
                        // QRã‚³ãƒ¼ãƒ‰ç”Ÿæˆï¼ˆã‚¢ãƒ‰ãƒ¬ã‚¹ç”¨ï¼‰
                        generateCryptoQR(crypto.address, crypto.tag);
                    }
                    break;
                    
                case 'bank':
                    const bank = JSON.parse(localStorage.getItem('bank_settings') || '{}');
                    html = `
                        <div class="space-y-3">
                            <div class="flex justify-between">
                                <span class="font-semibold">éŠ€è¡Œå:</span>
                                <span class="flex items-center">
                                    ${bank.name || 'N/A'}
                                    <button onclick="copyToClipboard('${bank.name}')" class="ml-2 text-blue-500">
                                        <i class="fas fa-copy"></i>
                                    </button>
                                </span>
                            </div>
                            <div class="flex justify-between">
                                <span class="font-semibold">æ”¯åº—å:</span>
                                <span class="flex items-center">
                                    ${bank.branch || 'N/A'}
                                    <button onclick="copyToClipboard('${bank.branch}')" class="ml-2 text-blue-500">
                                        <i class="fas fa-copy"></i>
                                    </button>
                                </span>
                            </div>
                            <div class="flex justify-between">
                                <span class="font-semibold">å£åº§ç¨®åˆ¥:</span>
                                <span>${bank.type || 'N/A'}</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="font-semibold">å£åº§ç•ªå·:</span>
                                <span class="flex items-center">
                                    ${bank.account || 'N/A'}
                                    <button onclick="copyToClipboard('${bank.account}')" class="ml-2 text-blue-500">
                                        <i class="fas fa-copy"></i>
                                    </button>
                                </span>
                            </div>
                            <div class="flex justify-between">
                                <span class="font-semibold">å£åº§åç¾©:</span>
                                <span class="flex items-center">
                                    ${bank.holder || 'N/A'}
                                    <button onclick="copyToClipboard('${bank.holder}')" class="ml-2 text-blue-500">
                                        <i class="fas fa-copy"></i>
                                    </button>
                                </span>
                            </div>
                            <div class="flex justify-between">
                                <span class="font-semibold">é‡‘é¡:</span>
                                <span class="flex items-center">
                                    ${application.amount.toLocaleString()}å††
                                    <button onclick="copyToClipboard('${application.amount}')" class="ml-2 text-blue-500">
                                        <i class="fas fa-copy"></i>
                                    </button>
                                </span>
                            </div>
                        </div>
                    `;
                    break;
                    
                case 'convenience':
                    const convenienceSettings = JSON.parse(localStorage.getItem('convenience_settings') || '{}');
                    const convenience = convenienceSettings[application.convenienceType];
                    if (convenience) {
                        html = `
                            <div class="space-y-3">
                                <div class="flex justify-between">
                                    <span class="font-semibold">ã‚³ãƒ³ãƒ“ãƒ‹:</span>
                                    <span>${convenience.name}</span>
                                </div>
                                ${convenience.code1 ? `
                                    <div class="flex justify-between">
                                        <span class="font-semibold">ã‚³ãƒ¼ãƒ‰1:</span>
                                        <span class="flex items-center">
                                            ${convenience.code1}
                                            <button onclick="copyToClipboard('${convenience.code1}')" class="ml-2 text-blue-500">
                                                <i class="fas fa-copy"></i>
                                            </button>
                                        </span>
                                    </div>
                                ` : ''}
                                ${convenience.code2 ? `
                                    <div class="flex justify-between">
                                        <span class="font-semibold">ã‚³ãƒ¼ãƒ‰2:</span>
                                        <span class="flex items-center">
                                            ${convenience.code2}
                                            <button onclick="copyToClipboard('${convenience.code2}')" class="ml-2 text-blue-500">
                                                <i class="fas fa-copy"></i>
                                            </button>
                                        </span>
                                    </div>
                                ` : ''}
                                <div class="flex justify-between">
                                    <span class="font-semibold">é‡‘é¡:</span>
                                    <span class="flex items-center">
                                        ${application.amount.toLocaleString()}å††
                                        <button onclick="copyToClipboard('${application.amount}')" class="ml-2 text-blue-500">
                                            <i class="fas fa-copy"></i>
                                        </button>
                                    </span>
                                </div>
                            </div>
                        `;
                    }
                    break;
            }
            
            paymentDetails.innerHTML = html;
            document.getElementById('paymentInfo').classList.remove('hidden');
        }
        
        function generateCryptoQR(address, tag) {
            const qrContainer = document.getElementById('qrCodeContainer');
            const qrData = tag ? `${address}?tag=${tag}` : address;
            
            qrContainer.innerHTML = '';
            QRCode.toCanvas(qrContainer, qrData, {
                width: 200,
                margin: 2
            }, function (error) {
                if (!error) {
                    qrContainer.classList.remove('hidden');
                }
            });
        }
        
        function copyToClipboard(text) {
            navigator.clipboard.writeText(text).then(function() {
                alert('ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸ: ' + text);
            });
        }
        
        function sendPurchaseNotification(application) {
            const settings = JSON.parse(localStorage.getItem('telegram_settings') || '{}');
            if (settings.purchase && settings.purchase.botToken && settings.purchase.chatId) {
                let message = settings.purchase.message || 'ğŸ”” æ–°ã—ã„è³¼å…¥ç”³è«‹\nğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼: {phone}\nğŸ’° é‡‘é¡: {amount}å††\nğŸ’³ æ±ºæ¸ˆæ–¹æ³•: {method}\nğŸ“… ç”³è«‹æ—¥æ™‚: {datetime}';
                
                message = message
                    .replace('{phone}', application.user)
                    .replace('{amount}', application.amount.toLocaleString())
                    .replace('{method}', getMethodName(application.method))
                    .replace('{datetime}', new Date(application.createdAt).toLocaleString());
                
                sendTelegramMessage(settings.purchase, message)
                    .catch(error => console.error('Telegramé€ä¿¡å¤±æ•—:', error));
            }
        }
        
        function sendWithdrawNotification(application) {
            const settings = JSON.parse(localStorage.getItem('telegram_settings') || '{}');
            if (settings.withdraw && settings.withdraw.botToken && settings.withdraw.chatId) {
                let message = settings.withdraw.message || 'ğŸ”„ æ–°ã—ã„æ›é‡‘ç”³è«‹\nğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼: {phone}\nğŸ’° é‡‘é¡: {amount}å††\nğŸ’³ å‡ºé‡‘æ–¹æ³•: {method}\nğŸ“… ç”³è«‹æ—¥æ™‚: {datetime}';
                
                message = message
                    .replace('{phone}', application.user)
                    .replace('{amount}', application.amount.toLocaleString())
                    .replace('{method}', getMethodName(application.method))
                    .replace('{datetime}', new Date(application.createdAt).toLocaleString());
                
                sendTelegramMessage(settings.withdraw, message)
                    .catch(error => console.error('Telegramé€ä¿¡å¤±æ•—:', error));
            }
        }
        
        function getMethodName(method) {
            const methods = {
                'paypay': 'PayPay',
                'crypto': 'ä»®æƒ³é€šè²¨',
                'bank': 'éŠ€è¡ŒæŒ¯è¾¼',
                'convenience': 'ã‚³ãƒ³ãƒ“ãƒ‹æ±ºæ¸ˆ'
            };
            return methods[method] || method;
        }
        
        function sendToGAS(application) {
            const settings = JSON.parse(localStorage.getItem('gas_settings') || '{}');
            if (settings.url) {
                const data = {
                    type: application.type,
                    user: application.user,
                    amount: application.amount,
                    method: application.method,
                    status: application.status,
                    createdAt: application.createdAt,
                    token: settings.token
                };
                
                fetch(settings.url, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(data)
                }).catch(error => console.error('GASé€ä¿¡å¤±æ•—:', error));
            }
        }
        
        // ç”³è«‹ç®¡ç†
        function loadApplications() {
            const applications = JSON.parse(localStorage.getItem('applications') || '[]');
            
            if (currentAppTab === 'purchase') {
                const purchaseApps = applications.filter(app => app.type === 'purchase');
                displayApplications(purchaseApps, 'purchaseList');
            } else {
                const withdrawApps = applications.filter(app => app.type === 'withdraw');
                displayApplications(withdrawApps, 'withdrawList');
            }
        }
        
        function displayApplications(applications, containerId) {
            const container = document.getElementById(containerId);
            container.innerHTML = '';
            
            if (applications.length === 0) {
                container.innerHTML = '<p class="text-gray-500 text-center py-8">ç”³è«‹ãŒã‚ã‚Šã¾ã›ã‚“</p>';
                return;
            }
            
            applications.reverse().forEach(app => {
                const appDiv = document.createElement('div');
                appDiv.className = 'border gold-border p-4 rounded-lg bg-gray-50';
                
                const statusColor = {
                    'pending': 'bg-yellow-100 text-yellow-800',
                    'approved': 'bg-green-100 text-green-800',
                    'completed': 'bg-blue-100 text-blue-800',
                    'cancelled': 'bg-red-100 text-red-800'
                };
                
                const statusText = {
                    'pending': 'ç”³è«‹ä¸­',
                    'approved': 'æ‰¿èªæ¸ˆã¿',
                    'completed': 'å®Œäº†',
                    'cancelled': 'ã‚­ãƒ£ãƒ³ã‚»ãƒ«'
                };
                
                appDiv.innerHTML = `
                    <div class="flex justify-between items-start mb-3">
                        <div>
                            <h4 class="font-semibold">${app.user}</h4>
                            <p class="text-sm text-gray-600">${new Date(app.createdAt).toLocaleString()}</p>
                        </div>
                        <span class="px-2 py-1 rounded text-xs font-semibold ${statusColor[app.status]}">${statusText[app.status]}</span>
                    </div>
                    <div class="grid grid-cols-2 gap-4 mb-3">
                        <div>
                            <span class="text-sm text-gray-600">é‡‘é¡:</span>
                            <span class="font-semibold">${app.amount.toLocaleString()}å††</span>
                        </div>
                        <div>
                            <span class="text-sm text-gray-600">æ–¹æ³•:</span>
                            <span class="font-semibold">${getMethodName(app.method)}</span>
                        </div>
                    </div>
                    <div class="flex space-x-2">
                        ${app.status === 'pending' ? `
                            <button onclick="updateApplicationStatus('${app.id}', 'approved')" class="bg-green-500 hover:bg-green-600 text-white px-3 py-1 rounded text-sm">
                                æ‰¿èª
                            </button>
                            <button onclick="updateApplicationStatus('${app.id}', 'cancelled')" class="bg-red-500 hover:bg-red-600 text-white px-3 py-1 rounded text-sm">
                                ã‚­ãƒ£ãƒ³ã‚»ãƒ«
                            </button>
                        ` : ''}
                        ${app.status === 'approved' ? `
                            <button onclick="updateApplicationStatus('${app.id}', 'completed')" class="bg-blue-500 hover:bg-blue-600 text-white px-3 py-1 rounded text-sm">
                                å®Œäº†
                            </button>
                        ` : ''}
                    </div>
                `;
                
                container.appendChild(appDiv);
            });
        }
        
        function updateApplicationStatus(id, status) {
            const applications = JSON.parse(localStorage.getItem('applications') || '[]');
            const application = applications.find(app => app.id === id);
            
            if (application) {
                application.status = status;
                application.updatedAt = new Date().toISOString();
                
                // ãƒã‚¤ãƒ³ãƒˆæ›´æ–°å‡¦ç†
                if (application.type === 'purchase' && status === 'completed') {
                    const users = JSON.parse(localStorage.getItem('users') || '{}');
                    if (users[application.user]) {
                        users[application.user].points = (users[application.user].points || 0) + application.amount;
                        localStorage.setItem('users', JSON.stringify(users));
                    }
                } else if (application.type === 'withdraw' && status === 'completed') {
                    const users = JSON.parse(localStorage.getItem('users') || '{}');
                    if (users[application.user]) {
                        users[application.user].points = Math.max(0, (users[application.user].points || 0) - application.amount);
                        localStorage.setItem('users', JSON.stringify(users));
                    }
                }
                
                localStorage.setItem('applications', JSON.stringify(applications));
                loadApplications();
                updateDashboard();
                addLog(`ç”³è«‹ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹æ›´æ–°: ${id} -> ${status}`, 'info');
            }
        }
        
        // ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰æ›´æ–°
        function updateDashboard() {
            const users = JSON.parse(localStorage.getItem('users') || '{}');
            const applications = JSON.parse(localStorage.getItem('applications') || '[]');
            
            document.getElementById('totalUsers').textContent = Object.keys(users).length;
            document.getElementById('totalPurchases').textContent = applications.filter(app => app.type === 'purchase').length;
            document.getElementById('totalWithdrawals').textContent = applications.filter(app => app.type === 'withdraw').length;
            
            const totalPoints = Object.values(users).reduce((sum, user) => sum + (user.points || 0), 0);
            document.getElementById('totalPoints').textContent = totalPoints.toLocaleString();
        }
        
        function initializeCharts() {
            // å–å¼•æ¨ç§»ãƒãƒ£ãƒ¼ãƒˆ
            const transactionCtx = document.getElementById('transactionChart').getContext('2d');
            window.transactionChart = new Chart(transactionCtx, {
                type: 'line',
                data: {
                    labels: ['1æœˆ', '2æœˆ', '3æœˆ', '4æœˆ', '5æœˆ', '6æœˆ'],
                    datasets: [{
                        label: 'è³¼å…¥ç”³è«‹',
                        data: [12, 19, 3, 5, 2, 3],
                        borderColor: '#10B981',
                        backgroundColor: 'rgba(16, 185, 129, 0.1)',
                        tension: 0.4
                    }, {
                        label: 'æ›é‡‘ç”³è«‹',
                        data: [2, 3, 20, 5, 1, 4],
                        borderColor: '#F59E0B',
                        backgroundColor: 'rgba(245, 158, 11, 0.1)',
                        tension: 0.4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false
                }
            });
            
            // æ±ºæ¸ˆæ–¹æ³•åˆ¥å‰²åˆãƒãƒ£ãƒ¼ãƒˆ
            const paymentMethodCtx = document.getElementById('paymentMethodChart').getContext('2d');
            window.paymentMethodChart = new Chart(paymentMethodCtx, {
                type: 'doughnut',
                data: {
                    labels: ['PayPay', 'ä»®æƒ³é€šè²¨', 'éŠ€è¡ŒæŒ¯è¾¼', 'ã‚³ãƒ³ãƒ“ãƒ‹'],
                    datasets: [{
                        data: [30, 25, 25, 20],
                        backgroundColor: ['#3B82F6', '#10B981', '#F59E0B', '#EF4444'],
                        borderWidth: 2,
                        borderColor: '#ffffff'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom'
                        }
                    }
                }
            });
        }
        
        function updateCharts() {
            const applications = JSON.parse(localStorage.getItem('applications') || '[]');
            
            // æ±ºæ¸ˆæ–¹æ³•åˆ¥ãƒ‡ãƒ¼ã‚¿æ›´æ–°
            const methodCounts = {
                'paypay': 0,
                'crypto': 0,
                'bank': 0,
                'convenience': 0
            };
            
            applications.forEach(app => {
                if (methodCounts[app.method] !== undefined) {
                    methodCounts[app.method]++;
                }
            });
            
            const total = Object.values(methodCounts).reduce((sum, count) => sum + count, 0);
            if (total > 0) {
                window.paymentMethodChart.data.datasets[0].data = [
                    (methodCounts.paypay / total) * 100,
                    (methodCounts.crypto / total) * 100,
                    (methodCounts.bank / total) * 100,
                    (methodCounts.convenience / total) * 100
                ];
                window.paymentMethodChart.update();
            }
        }
        
        function loadAllData() {
            updateDashboard();
            loadUserList();
            loadPaymentSettings();
        }
        
        // ãƒ­ã‚°ç®¡ç†
        function addLog(message, type = 'info') {
            const logs = JSON.parse(localStorage.getItem('logs') || '[]');
            const log = {
                id: Date.now(),
                message: message,
                type: type,
                timestamp: new Date().toISOString()
            };
            
            logs.unshift(log); // æœ€æ–°ã‚’å…ˆé ­ã«
            if (logs.length > 1000) {
                logs.splice(1000); // 1000ä»¶ã¾ã§ä¿æŒ
            }
            
            localStorage.setItem('logs', JSON.stringify(logs));
            
            // ãƒ­ã‚°ã‚¿ãƒ–ãŒã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãªå ´åˆã¯æ›´æ–°
            if (currentTab === 'logs') {
                loadLogs();
            }
        }
        
        function loadLogs() {
            const logs = JSON.parse(localStorage.getItem('logs') || '[]');
            const logsList = document.getElementById('logsList');
            logsList.innerHTML = '';
            
            if (logs.length === 0) {
                logsList.innerHTML = '<p class="text-gray-500 text-center py-4">ãƒ­ã‚°ãŒã‚ã‚Šã¾ã›ã‚“</p>';
                return;
            }
            
            logs.slice(0, 100).forEach(log => { // æœ€æ–°100ä»¶ã‚’è¡¨ç¤º
                const logDiv = document.createElement('div');
                logDiv.className = 'flex justify-between items-center p-2 border-b border-gray-200';
                
                const typeColor = {
                    'success': 'text-green-600',
                    'error': 'text-red-600',
                    'warning': 'text-yellow-600',
                    'info': 'text-blue-600'
                };
                
                logDiv.innerHTML = `
                    <div class="flex-1">
                        <span class="${typeColor[log.type] || 'text-gray-600'}">${log.message}</span>
                    </div>
                    <div class="text-sm text-gray-500">
                        ${new Date(log.timestamp).toLocaleString()}
                    </div>
                `;
                
                logsList.appendChild(logDiv);
            });
        }
        
        function clearLogs() {
            if (confirm('ã™ã¹ã¦ã®ãƒ­ã‚°ã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ')) {
                localStorage.setItem('logs', JSON.stringify([]));
                loadLogs();
                alert('ãƒ­ã‚°ã‚’å‰Šé™¤ã—ã¾ã—ãŸã€‚');
            }
        }
    </script>
<script defer src="https://static.cloudflareinsights.com/beacon.min.js/vcd15cbe7772f49c399c6a5babf22c1241717689176015" integrity="sha512-ZpsOmlRQV6y907TI0dKBHq9Md29nnaEIPlkf84rnaERnq6zvWvPUqr2ft8M1aS28oN72PdrCzSjY4U6VaAw1EQ==" data-cf-beacon='{"rayId":"96f9cf170f37b829","serverTiming":{"name":{"cfExtPri":true,"cfEdge":true,"cfOrigin":true,"cfL4":true,"cfSpeedBrain":true,"cfCacheStatus":true}},"version":"2025.8.0","token":"4edd5f8ec12a48cfa682ab8261b80a79"}' crossorigin="anonymous"></script>
</body>
</html>
    <script id="html_badge_script1">
        window.__genspark_remove_badge_link = "https://www.genspark.ai/api/html_badge/" +
            "remove_badge?token=To%2FBnjzloZ3UfQdcSaYfDrPhSQI4r78sRe6ZZsALMsQhdA3auE8xpgBgacHm165ODO6u3%2F823LzfMW8ddyyL9VqDp9TIpKS8NbxEqMTK0aUWoH%2BQTXgKrRBPBiTe3peJbJaVL0Zk%2BUyyz0guLic1nAL5G4CCw7FmN%2Fz7GJ49LrQUJGtbo5pCYP%2FM3ONVgkHS2wjTdKVwc%2Fkzd6htcuIgPNk9GHI0PxRNjpV9fBJzY8cGjsI43qZIdgH4QL4MEV1hjM98XrzVFz%2FIjOPS36RvUkJhyZc8HVLbYfq6sE93OzXb%2BQRym%2FHeTNU5TOqe02MFa%2FJqpqmdJcYIXicpr4dSWcWXofy7496f4b4QEWMMcw36hLFp06%2B41JlmhDVJTDXMLgbNrsAynm5bjZhNw3RxhYrkPkGhBCa62xnqISFTOLEDJ8MsMAWPJLmbKOYBmHbxJ0ALUwNmbpMA7jL9N1qyfquxUfF0DBhLHVjkKHZUYpVkouop4hT9uQeoFm7q7nyXVZ%2ByWJyFkzn5aoUM%2FdE7NQX8D8dpe6YHWpcR2%2BcMmyM%3D";
        window.__genspark_locale = "ja-JP";
        window.__genspark_token = "To/BnjzloZ3UfQdcSaYfDrPhSQI4r78sRe6ZZsALMsQhdA3auE8xpgBgacHm165ODO6u3/823LzfMW8ddyyL9VqDp9TIpKS8NbxEqMTK0aUWoH+QTXgKrRBPBiTe3peJbJaVL0Zk+Uyyz0guLic1nAL5G4CCw7FmN/z7GJ49LrQUJGtbo5pCYP/M3ONVgkHS2wjTdKVwc/kzd6htcuIgPNk9GHI0PxRNjpV9fBJzY8cGjsI43qZIdgH4QL4MEV1hjM98XrzVFz/IjOPS36RvUkJhyZc8HVLbYfq6sE93OzXb+QRym/HeTNU5TOqe02MFa/JqpqmdJcYIXicpr4dSWcWXofy7496f4b4QEWMMcw36hLFp06+41JlmhDVJTDXMLgbNrsAynm5bjZhNw3RxhYrkPkGhBCa62xnqISFTOLEDJ8MsMAWPJLmbKOYBmHbxJ0ALUwNmbpMA7jL9N1qyfquxUfF0DBhLHVjkKHZUYpVkouop4hT9uQeoFm7q7nyXVZ+yWJyFkzn5aoUM/dE7NQX8D8dpe6YHWpcR2+cMmyM=";
    </script>
    
    <script id="html_notice_dialog_script" src="https://www.genspark.ai/notice_dialog.js"></script>
    
